(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{63:(e,t,s)=>{"use strict";var a=s(7260);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},1568:(e,t,s)=>{Promise.resolve().then(s.bind(s,8340))},5016:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(2821),r=s(5889);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},5229:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5998:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},6651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7003:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var a=s(5155);s(2115);var r=s(2467),l=s(3101),i=s(5016);let n=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:s,size:l,asChild:o=!1,...d}=e,c=o?r.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(n({variant:s,size:l,className:t})),...d})}},8171:(e,t,s)=>{"use strict";s.d(t,{dj:()=>x});var a=s(2115);let r=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=[],o={toasts:[]};function d(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),n.forEach(e=>{e(o)})}function c(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function x(){let[e,t]=a.useState(o);return a.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},8340:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var a=s(5155),r=s(2115),l=s(63);let i=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),x({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},d=[],c={toasts:[]};function x(e){c=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>x({type:"DISMISS_TOAST",toastId:s});return x({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>x({type:"UPDATE_TOAST",toast:{...e,id:s}})}}var m=s(7003),h=s(8171),g=s(1847);let p=(0,g.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var f=s(6651),b=s(5229);function y(e){let{blog:t,onSave:s,onCancel:l}=e,[i,n]=(0,r.useState)({title:"",excerpt:"",contentHtml:"",author:"",status:1,featured:0,categoryIds:[],images:[],video:""}),[o,d]=(0,r.useState)([]),{toast:c}=(0,h.dj)();(0,r.useEffect)(()=>{x(),t&&n({...t,categoryIds:t.categoryIds||[],images:t.images||[]})},[t]);let x=async()=>{try{let e=await fetch("/api/categories"),t=await e.json();d(t)}catch(e){console.error("Failed to fetch categories:",e)}},u=e=>{let{name:t,value:s}=e.target;n(e=>({...e,[t]:s}))},g=e=>{n(t=>({...t,[e]:+(1!==t[e])}))},p=async e=>{let t=e.target.files;if(t)for(let e of t){let t=new FormData;t.append("file",e);try{let e=await fetch("/api/upload",{method:"POST",body:t}),s=await e.json();n(e=>({...e,images:[...e.images,s.url]})),c({title:"Success",description:"Image uploaded"})}catch(e){c({title:"Error",description:"Upload failed",variant:"destructive"})}}};return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8 border",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:t?"Edit Blog":"Create New Blog"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(i)},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Title"}),(0,a.jsx)("input",{type:"text",name:"title",value:i.title,onChange:u,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",placeholder:"Enter blog title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Author"}),(0,a.jsx)("input",{type:"text",name:"author",value:i.author,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",placeholder:"Author name"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Excerpt"}),(0,a.jsx)("textarea",{name:"excerpt",value:i.excerpt,onChange:u,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Short description..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Content (HTML)"}),(0,a.jsx)("textarea",{name:"contentHtml",value:i.contentHtml,onChange:u,rows:10,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm resize-vertical",placeholder:"<h1>Blog content...</h1>"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-700",children:"Status"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:1===i.status?"Published":"Draft"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:1===i.status,onChange:()=>g("status"),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-[46px] h-[25px]  bg-gray-300 peer-focus:outline-none peer-focus:ring-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2.5px] after:left-[3px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-700",children:"Featured"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:1===i.featured?"Yes":"No"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:1===i.featured,onChange:()=>g("featured"),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-[46px] h-[25px]  bg-gray-300 peer-focus:outline-none peer-focus:ring-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2.5px] after:left-[3px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Categories"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:o.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-3 border rounded-lg hover:bg-gray-50 transition",children:[(0,a.jsx)("input",{type:"checkbox",checked:i.categoryIds.includes(e.id),onChange:()=>{var t;return t=e.id,void n(e=>({...e,categoryIds:e.categoryIds.includes(t)?e.categoryIds.filter(e=>e!==t):[...e.categoryIds,t]}))},className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Upload Images"}),(0,a.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:p,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-3 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),i.images.length>0&&(0,a.jsx)("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:i.images.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e,alt:"Upload ".concat(t+1),className:"w-full h-32 object-cover rounded-lg border"}),(0,a.jsx)("button",{type:"button",onClick:()=>{n(e=>({...e,images:e.images.filter((e,s)=>s!==t)}))},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:"\xd7"})]},t))})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,a.jsx)(m.$,{type:"submit",size:"lg",className:"flex-1",children:t?"Update Blog":"Create Blog"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",size:"lg",onClick:l,className:"flex-1",children:"Cancel"})]})]})]})}let j=(0,g.A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),v=(0,g.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function N(e){let{blogs:t,onEdit:s,onDelete:r}=e;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Title"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Author"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Featured"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Views"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm",children:e.title}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm",children:e.author}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat(1===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:1===e.status?"Published":"Draft"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat(1===e.featured?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:1===e.featured?"Yes":"No"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm",children:e.views||0}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(m.$,{size:"sm",variant:"outline",onClick:()=>s(e),children:(0,a.jsx)(j,{size:16})}),(0,a.jsx)(m.$,{size:"sm",variant:"destructive",onClick:()=>r(e.id),children:(0,a.jsx)(v,{size:16})})]})})]},e.id))})]})})}function w(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),{toast:c}=(0,h.dj)(),[x,u]=(0,r.useState)(""),[g,j]=(0,r.useState)([]),[v,w]=(0,r.useState)(1);(0,r.useEffect)(()=>{k()},[]);let k=async()=>{try{let e=await fetch("/api/admin/blogs");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();t(s)}catch(e){c({title:"Error",description:"Failed to fetch blogs",variant:"destructive"})}finally{d(!1)}},S=async s=>{if(confirm("Are you sure you want to delete this blog?"))try{(await fetch("/api/admin/blogs/".concat(s),{method:"DELETE"})).ok&&(t(e.filter(e=>e.id!==s)),c({title:"Success",description:"Blog deleted successfully"}))}catch(e){c({title:"Error",description:"Failed to delete blog",variant:"destructive"})}},C=async s=>{try{let a,r={...s,featured:+(1===Number(s.featured)),status:+(1===Number(s.status)),likes:Number(s.likes)||0,stars:Number(s.stars)||0};if(!(a=i?await fetch("/api/admin/blogs/".concat(i.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}):await fetch("/api/admin/blogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Save failed");let o=await a.json();i?(t(e.map(e=>e.id===o.id?o:e)),c({title:"Success",description:"Blog updated successfully"})):(t([...e,o]),c({title:"Success",description:"Blog created successfully"})),l(!1),n(null)}catch(e){console.error(e),c({title:"Error",description:"Failed to save blog",variant:"destructive"})}},A=()=>{l(!1),n(null)};if(o)return(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{children:"Loading blogs..."})});let T=e.length,E=e.filter(e=>1===e.status||!0===e.status).length,z=e.filter(e=>e.title.toLowerCase().includes(x.toLowerCase())),O=Math.max(1,Math.ceil(z.length/10)),L=z.slice((v-1)*10,10*v);return(0,a.jsx)("div",{className:"container mx-auto py-8 max-w-7xl",children:s?(0,a.jsxs)("div",{children:[(0,a.jsxs)(m.$,{variant:"ghost",onClick:A,className:"mb-6 flex items-center gap-2 hover:bg-gray-100",children:[(0,a.jsx)(p,{size:20}),(0,a.jsx)("span",{children:"Back to Blog List"})]}),(0,a.jsx)(y,{blog:i,onSave:C,onCancel:A})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold",children:"Blog Posts"}),(0,a.jsx)(m.$,{onClick:()=>{l(!0),n(null)},children:"Add New Blog"})]}),(0,a.jsxs)("div",{className:"flex space-x-2 mb-6 bg-muted/50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Blogs"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:T})]}),(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:E})]}),(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Inactive"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:T-E})]})]}),(0,a.jsxs)("div",{className:"relative mb-8",children:[(0,a.jsx)(f.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",value:x,onChange:t=>{let s=t.target.value;u(s),w(1),s.trim()?j([...new Set(e.filter(e=>e.title.toLowerCase().includes(s.toLowerCase())).map(e=>e.title))].slice(0,6)):j([])},placeholder:"Search blogs by title...",className:"w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),x&&(0,a.jsx)("button",{type:"button",onClick:()=>{u(""),j([]),w(1)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:(0,a.jsx)(b.A,{size:20})})]}),(0,a.jsx)("div",{className:"mb-10",children:(0,a.jsx)(N,{blogs:L,onEdit:e=>{n(e),l(!0)},onDelete:S})}),O>1&&(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-2 mt-10",children:Array.from({length:O},(e,t)=>(0,a.jsx)(m.$,{onClick:()=>{w(t+1),window.scrollTo({top:0,behavior:"smooth"})},variant:v===t+1?"default":"outline",size:"sm",children:t+1},t+1))})]})})}function k(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[c,x]=(0,r.useState)({name:"",slug:""}),[u,g]=(0,r.useState)(""),{toast:p}=(0,h.dj)();(0,r.useEffect)(()=>{y()},[]);let y=async()=>{try{let e=await fetch("/api/categories"),s=await e.json();t(s)}catch(e){p({title:"Error",description:"Failed to fetch categories",variant:"destructive"})}},N=async e=>{e.preventDefault();try{o?(await fetch("/api/admin/categories/".concat(o),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(y(),p({title:"Success",description:"Category updated"})):(await fetch("/api/admin/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(y(),p({title:"Success",description:"Category created"})),l(!1),n(!1),d(null),x({name:"",slug:""})}catch(e){p({title:"Error",description:"Operation failed",variant:"destructive"})}},w=async e=>{if(confirm("Delete this category?"))try{(await fetch("/api/admin/categories/".concat(e),{method:"DELETE"})).ok&&(y(),p({title:"Success",description:"Category deleted"}))}catch(e){p({title:"Error",description:"Failed to delete",variant:"destructive"})}},k=u?e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())):e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold",children:"Categories"}),(0,a.jsx)(m.$,{onClick:()=>{l(!0),n(!1),d(null),x({name:"",slug:""})},children:"Add Category"})]}),s&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Name"}),(0,a.jsx)("input",{type:"text",value:c.name,onChange:e=>x({...c,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Slug"}),(0,a.jsx)("input",{type:"text",value:c.slug,onChange:e=>x({...c,slug:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(m.$,{type:"submit",className:"flex-1",children:"Create"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>{l(!1),d(null)},className:"flex-1",children:"Cancel"})]})]})}),i&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Name"}),(0,a.jsx)("input",{type:"text",value:c.name,onChange:e=>x({...c,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Slug"}),(0,a.jsx)("input",{type:"text",value:c.slug,onChange:e=>x({...c,slug:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(m.$,{type:"submit",className:"flex-1",children:"Update"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>{n(!1),d(null)},className:"flex-1",children:"Cancel"})]})]})}),!s&&!i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name...",value:u,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"}),u&&(0,a.jsx)("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(b.A,{size:20})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Slug"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:k.length>0?k.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.slug}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(m.$,{size:"sm",variant:"outline",onClick:()=>{d(e.id),x(e),n(!0),l(!1)},children:(0,a.jsx)(j,{size:16})}),(0,a.jsx)(m.$,{size:"sm",variant:"destructive",onClick:()=>w(e.id),children:(0,a.jsx)(v,{size:16})})]})})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"px-6 py-8 text-center text-gray-500",children:"No categories found"})})})]})})]})]})}function S(){let[e,t]=(0,r.useState)({primary:"#1E3A8A",secondary:"#06B6D4",accent:"#F97316",muted:"#6B7280"}),[s,l]=(0,r.useState)(!0),{toast:i}=(0,h.dj)();(0,r.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=await fetch("/api/colors"),s=await e.json();t(s)}catch(e){i({title:"Error",description:"Failed to fetch colors",variant:"destructive"})}finally{l(!1)}},o=(s,a)=>{t({...e,[s]:a})},d=async()=>{try{if((await fetch("/api/admin/colors",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok){let t=document.documentElement;Object.entries(e).forEach(e=>{let[s,a]=e;t.style.setProperty("--color-".concat(s),a)}),i({title:"Success",description:"Colors updated"})}}catch(e){i({title:"Error",description:"Failed to update colors",variant:"destructive"})}};return s?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"Site Colors"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 max-w-2xl",children:[(0,a.jsx)("div",{className:"space-y-6",children:Object.entries(e).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium w-24 capitalize",children:t}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"color",value:s,onChange:e=>o(t,e.target.value),className:"w-12 h-12 rounded cursor-pointer border border-gray-300"}),(0,a.jsx)("input",{type:"text",value:s,onChange:e=>o(t,e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 font-mono"})]})]},t)})}),(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"font-bold mb-4",children:"Preview"}),(0,a.jsx)("div",{className:"flex gap-4 flex-wrap",children:Object.entries(e).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-lg shadow",style:{backgroundColor:s}}),(0,a.jsx)("p",{className:"text-xs mt-2 capitalize",children:t})]},t)})})]}),(0,a.jsx)(m.$,{onClick:d,className:"w-full mt-6",children:"Save Colors"})]})]})}let C=(0,g.A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),A=(0,g.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),T=(0,g.A)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),E=(0,g.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),z=(0,g.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),O=(0,g.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),L=(0,g.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function M(e){let{activeTab:t,setActiveTab:s,onLogout:r,isOpen:l,toggleOpen:i}=e;return(0,a.jsxs)("div",{className:"flex flex-col h-screen bg-[#f8f4f3] border-r border-gray-300",children:[(0,a.jsxs)("div",{className:"p-3 flex items-center mx-auto justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between  w-full ",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-orange-400 flex items-center justify-center shadow-md",children:(0,a.jsx)("span",{className:"text-white font-black text-xl",children:"L"})}),(0,a.jsx)("h2",{className:"font-black text-2xl tracking-tight text-gray-900 transition-all duration-300 ".concat(l?"block opacity-100":"hidden opacity-0"),children:"LOREM"})]}),(0,a.jsx)("button",{onClick:i,className:"p-2 rounded-lg hover:bg-gray-200 transition md:hidden block mr-2",children:(0,a.jsx)(z,{size:24,className:"text-gray-700"})})]}),(0,a.jsx)("div",{className:"w-[90%] h-[2px] rounded-[4px] bg-gray-200 mx-auto"}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-8 overflow-y-auto",children:[{section:"ADMIN",items:[{id:"dashboard",label:"Dashboard",icon:C}]},{section:"BLOG",items:[{id:"blogs",label:"Post",icon:A},{id:"categories",label:"Categories",icon:T}]},{section:"PERSONAL",items:[{id:"links",label:"Links",icon:E,badge:"2 New"}]}].map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 px-2 transition-all duration-300 ".concat(l?"block opacity-100":"hidden opacity-0"),children:e.section}),(0,a.jsx)("div",{className:"space-y-1",children:e.items.map(e=>{let r=e.icon,i=t===e.id;return(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"w-full flex items-center px-4 py-3 rounded-lg transition-all font-semibold text-sm group relative\n                      ".concat(i?"bg-gray-950 text-white shadow-md":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"," ").concat(!l&&"justify-center"),children:[(0,a.jsxs)("div",{className:"flex items-center ".concat(l?"gap-3":"gap-0"),children:[(0,a.jsx)(r,{size:20,className:i?"text-white":"text-gray-600"}),(0,a.jsx)("span",{className:"transition-all duration-300 ".concat(l?"block":"hidden"),children:e.label})]}),(0,a.jsxs)("div",{className:"absolute right-4 flex items-center gap-2 transition-all duration-300 ".concat(l?"block":"hidden"),children:[e.badge&&(0,a.jsx)("span",{className:"text-xs px-2.5 py-0.5 rounded-full font-medium ".concat(e.badge.includes("New")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.badge}),e.hasArrow&&(0,a.jsx)(O,{size:16,className:i?"text-white/70":"text-gray-400"})]})]},e.id)})})]},e.section))}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-300",children:(0,a.jsxs)(m.$,{onClick:r,className:"w-full bg-gray-950 hover:bg-black text-white font-semibold rounded-lg py-6 flex items-center transition-all ".concat(l?"justify-center gap-3":"justify-center"),children:[(0,a.jsx)(L,{size:20}),(0,a.jsx)("span",{className:"transition-all duration-300 ".concat(l?"block":"hidden"),children:"Logout"})]})})]})}function P(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),[o,d]=(0,r.useState)({title:"",href:""}),[c,x]=(0,r.useState)(""),[u,g]=(0,r.useState)(!1),{toast:p}=(0,h.dj)();(0,r.useEffect)(()=>{f()},[]);let f=async()=>{try{let e=await fetch("/api/links"),s=await e.json();t(s)}catch(e){p({title:"Error",description:"Failed to fetch links",variant:"destructive"})}},y=async e=>{e.preventDefault();try{i?(await fetch("/api/admin/links/".concat(i),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok&&(f(),p({title:"Success",description:"Link updated"})):(await fetch("/api/admin/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok&&(f(),p({title:"Success",description:"Link created"})),l(!1),n(null),d({title:"",href:""})}catch(e){p({title:"Error",description:"Operation failed",variant:"destructive"})}},N=async e=>{if(confirm("Delete this link?"))try{(await fetch("/api/admin/links/".concat(e),{method:"DELETE"})).ok&&(f(),p({title:"Success",description:"Link deleted"}))}catch(e){p({title:"Error",description:"Failed to delete",variant:"destructive"})}},w=(0,r.useMemo)(()=>c.trim()?e.filter(e=>e.title.toLowerCase().includes(c.toLowerCase())):e,[e,c]);return(0,r.useMemo)(()=>c.trim()?e.filter(e=>e.title.toLowerCase().includes(c.toLowerCase())).slice(0,5):[],[e,c]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold",children:"Links"}),(0,a.jsx)(m.$,{onClick:()=>{l(!0),n(null),d({title:"",href:""})},children:"Add Link"})]}),(0,a.jsx)("div",{className:"mb-4 relative max-w-md",children:(0,a.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg px-3 py-2 bg-white",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by title...",value:c,onChange:e=>{x(e.target.value),g(!0)},className:"flex-1 outline-none text-sm"}),c&&(0,a.jsx)("button",{type:"button",onClick:()=>{x(""),g(!1)},className:"ml-2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(b.A,{size:14})})]})}),s&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Title"}),(0,a.jsx)("input",{type:"text",value:o.title,onChange:e=>d({...o,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"URL"}),(0,a.jsx)("input",{type:"url",value:o.href,onChange:e=>d({...o,href:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(m.$,{type:"submit",className:"flex-1",children:i?"Update":"Create"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>{l(!1),n(null)},className:"flex-1",children:"Cancel"})]})]})}),!s&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"Title"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold",children:"URL"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold",children:"Actions"})]})}),(0,a.jsxs)("tbody",{children:[w.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:e.title}),(0,a.jsx)("td",{className:"px-6 py-4 text-blue-600 underline",children:(0,a.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",children:e.href})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(m.$,{size:"sm",variant:"outline",onClick:()=>{n(e.id),d({title:e.title,href:e.href}),l(!0)},children:(0,a.jsx)(j,{size:16})}),(0,a.jsx)(m.$,{size:"sm",variant:"destructive",onClick:()=>N(e.id),children:(0,a.jsx)(v,{size:16})})]})})]},e.id)),0===w.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No links found."})})]})]})})]})}var D=s(5998);let I=(0,g.A)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),_=(0,g.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function F(e){let{userName:t,userRole:s,onLogout:l,sidebarOpen:i,toggleSidebar:n}=e,[o,d]=(0,r.useState)(!1),c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsxs)("div",{className:"bg-[#f8f4f3] px-6 py-3 flex items-center shadow-md shadow-black/5 sticky top-0 z-30",children:[(0,a.jsx)("button",{onClick:n,className:"text-gray-700 hover:text-gray-900 mr-6",children:(0,a.jsx)(z,{size:28})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 ml-auto relative",ref:c,children:[(0,a.jsx)("button",{className:"text-gray-400 hover:text-gray-600 w-10 h-10 flex items-center justify-center rounded",children:(0,a.jsx)(f.A,{size:22})}),(0,a.jsxs)("button",{className:"text-gray-400 hover:text-gray-600 w-10 h-10 flex items-center justify-center rounded relative",children:[(0,a.jsx)(D.A,{size:22}),(0,a.jsx)("span",{className:"absolute top-1 right-1 w-3 h-3 bg-lime-400 border-2 border-white rounded-full"})]}),(0,a.jsx)("button",{onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},className:"text-gray-400 hover:text-gray-600 w-10 h-10 flex items-center justify-center rounded",children:(0,a.jsx)(I,{size:22})}),(0,a.jsx)("button",{className:"flex items-center gap-3 pl-4 border-l border-gray-300",onClick:()=>d(!o),children:(0,a.jsx)("div",{className:"w-10 h-10 relative",children:(0,a.jsxs)("div",{className:"p-1 bg-white rounded-full",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-400 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-bold text-white",children:null==t?void 0:t.slice(0,2).toUpperCase()})}),(0,a.jsx)("div",{className:"top-0 left-7 absolute w-3 h-3 bg-lime-400 border-2 border-white rounded-full animate-ping"}),(0,a.jsx)("div",{className:"top-0 left-7 absolute w-3 h-3 bg-lime-500 border-2 border-white rounded-full"})]})})}),o&&(0,a.jsxs)("div",{className:"absolute right-0 top-16 bg-white shadow-xl rounded-[8px] w-52 z-50 p-[4px]",children:[(0,a.jsxs)("button",{className:"w-full px-4 py-2 flex items-center gap-2 rounded-[8px] text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(_,{size:16})," Profile"]}),(0,a.jsxs)("button",{onClick:l,className:"w-full px-4 py-2 flex items-center gap-2 rounded-[8px] text-red-600 hover:bg-red-100",children:[(0,a.jsx)(L,{size:16})," Logout"]})]})]})]})}function $(){let[e,t]=(0,r.useState)("dashboard"),[s,i]=(0,r.useState)({totalBlogs:0,totalCategories:0,totalLinks:0}),[n,o]=(0,r.useState)(!0),[m,h]=(0,r.useState)(!0),g=(0,l.useRouter)(),{toast:p}=function(){let[e,t]=r.useState(c);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>x({type:"DISMISS_TOAST",toastId:e})}}();(0,r.useEffect)(()=>{(async()=>{try{o(!0);let[e,t,s]=await Promise.all([fetch("/api/blogs"),fetch("/api/categories"),fetch("/api/links")]);if(!e.ok||!t.ok||!s.ok)throw Error("Failed to fetch dashboard data");let a=await e.json(),r=await t.json(),l=await s.json();i({totalBlogs:Array.isArray(a)?a.filter(e=>1===e.status).length:0,totalCategories:Array.isArray(r)?r.length:0,totalLinks:Array.isArray(l)?l.length:0})}catch(e){console.error("Failed to load dashboard stats:",e),p({title:"Error",description:"Failed to load dashboard stats",variant:"destructive"})}finally{o(!1)}})()},[p]);let f=async()=>{try{if((await fetch("/api/auth/logout",{method:"POST"})).ok)p({title:"Success",description:"Logged out successfully"}),g.push("/dashboard/login");else throw Error("Logout failed")}catch(e){p({title:"Error",description:"Logout failed. Please try again.",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"fixed inset-y-0 left-0 z-[999] bg-[#f8f4f3] border-r border-gray-300 flex flex-col transition-all duration-300 ease-in-out\n          ".concat(m?"w-64 translate-x-0":"w-20 -translate-x-full lg:translate-x-0","\n          lg:relative lg:z-auto lg:translate-x-0\n        "),children:(0,a.jsx)(M,{activeTab:e,setActiveTab:t,onLogout:f,isOpen:m,toggleOpen:()=>h(!m)})}),m&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 z-50 lg:hidden",onClick:()=>h(!1)}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,a.jsx)("div",{className:"sticky top-0 z-40 bg-white ",children:(0,a.jsx)(F,{userName:"Admin User",userRole:"Administrator",onLogout:f,sidebarOpen:m,toggleSidebar:()=>h(!m)})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-4 lg:p-10 max-w-7xl mx-auto",children:["dashboard"===e&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-100 p-6 shadow-md shadow-black/5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("div",{children:[n?(0,a.jsx)("div",{className:"h-9 w-20 bg-gray-200 rounded animate-pulse"}):(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:s.totalBlogs}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500 mt-1",children:"Total Published Blogs"})]}),(0,a.jsx)("span",{className:"text-4xl",children:"Pen"})]}),(0,a.jsx)("button",{onClick:()=>t("blogs"),className:"text-red-600 font-medium text-sm hover:text-red-700 transition",children:"View all →"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-100 p-6 shadow-md shadow-black/5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("div",{children:[n?(0,a.jsx)("div",{className:"h-9 w-20 bg-gray-200 rounded animate-pulse"}):(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:s.totalCategories}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500 mt-1",children:"Categories"})]}),(0,a.jsx)("span",{className:"text-4xl",children:"Folder"})]}),(0,a.jsx)("button",{onClick:()=>t("categories"),className:"text-red-600 font-medium text-sm hover:text-red-700 transition",children:"View all →"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-100 p-6 shadow-md shadow-black/5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("div",{children:[n?(0,a.jsx)("div",{className:"h-9 w-20 bg-gray-200 rounded animate-pulse"}):(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:s.totalLinks}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500 mt-1",children:"Useful Links"})]}),(0,a.jsx)("span",{className:"text-4xl",children:"Link"})]}),(0,a.jsx)("button",{onClick:()=>t("links"),className:"text-red-600 font-medium text-sm hover:text-red-700 transition",children:"View all →"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-100 shadow-md shadow-black/5 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:n?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-5/6"})]}):(0,a.jsx)("p",{children:"Blog created or updated • Just now"})})]})]}),"blogs"===e&&(0,a.jsx)(w,{}),"categories"===e&&(0,a.jsx)(k,{}),"links"===e&&(0,a.jsx)(P,{}),"colors"===e&&(0,a.jsx)(S,{})]})})]})]})}}},e=>{e.O(0,[545,441,255,358],()=>e(e.s=1568)),_N_E=e.O()}]);